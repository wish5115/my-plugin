# My Plugin ä½¿ç”¨è¯´æ˜

## ğŸ“– é¡¹ç›®ç®€ä»‹

My Plugin æ˜¯ä¸€ä¸ªæ€æºç¬”è®°ï¼ˆSiYuanï¼‰æ’ä»¶å¼€å‘æ¨¡æ¿ï¼Œæä¾›äº†æ’ä»¶å¼€å‘çš„åŸºç¡€æ¡†æ¶å’Œå¸¸è§åŠŸèƒ½ç¤ºä¾‹ã€‚

**æ’ä»¶åç§°ï¼š**  My Pluginï¼ˆæˆ‘çš„æ’ä»¶ï¼‰  
**ä½œè€…ï¼š**  Wilson  
**ç‰ˆæœ¬ï¼š**  0.0.1  
**è®¸å¯è¯ï¼š**  MIT  
**æœ€ä½æ”¯æŒç‰ˆæœ¬ï¼š**  SiYuan 3.0.12+

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### 1. å‘½ä»¤é¢æ¿åŠŸèƒ½

- **å¿«æ·é”®ï¼š**  `â‡§âŒ˜O`ï¼ˆShift + Command + Oï¼‰
- **åŠŸèƒ½ï¼š**  æ‰“å¼€è‡ªå®šä¹‰å¯¹è¯æ¡†
- **è¯´æ˜ï¼š**  é€šè¿‡å‘½ä»¤é¢æ¿æˆ–å¿«æ·é”®å¿«é€Ÿæ‰“å¼€æ¼”ç¤ºå¯¹è¯æ¡†

### 2. è‡ªå®šä¹‰åœé æ ï¼ˆDockï¼‰

- **å¿«æ·é”®ï¼š**  `âŒ¥âŒ˜W`ï¼ˆOption + Command + Wï¼‰
- **ä½ç½®ï¼š**  å·¦ä¸‹è§’
- **åŠŸèƒ½ï¼š**

  - æ¡Œé¢ç«¯ï¼šåµŒå…¥ç™¾åº¦ç½‘é¡µ iframe
  - ç§»åŠ¨ç«¯ï¼šæ˜¾ç¤ºè‡ªå®šä¹‰æ–‡æœ¬
- **å°ºå¯¸ï¼š**  å®½åº¦ 200pxï¼Œé«˜åº¦è‡ªé€‚åº”

### 3. æ’ä»¶è®¾ç½®

- **é…ç½®é¡¹ï¼š**  Readonly textï¼ˆåªè¯»æ–‡æœ¬ï¼‰
- **è¯´æ˜ï¼š**  å¯åœ¨è®¾ç½®é¢æ¿ä¸­é…ç½®åªè¯»æ–‡æœ¬å†…å®¹ï¼Œè¯¥å†…å®¹ä¼šä¿å­˜åˆ° `config.json`

### 4. æ ·å¼å®šåˆ¶

- **ç¤ºä¾‹ï¼š**  å°†ç¬”è®°æ ‡é¢˜è¾“å…¥æ¡†é¢œè‰²è®¾ç½®ä¸ºè“è‰²
- **æ–‡ä»¶ï¼š**  `index.css`

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
my-plugin/
â”œâ”€â”€ node_modules/           # æ’ä»¶ä¾èµ–åŒ…ï¼Œç”¨äºIDEå¼€å‘æç¤º
â”œâ”€â”€ i18n/                   # å›½é™…åŒ–è¯­è¨€æ–‡ä»¶
â”‚   â”œâ”€â”€ en_US.json          # è‹±æ–‡
â”‚   â””â”€â”€ zh_CN.json          # ç®€ä½“ä¸­æ–‡
â”œâ”€â”€ icon.png                # æ’ä»¶å›¾æ ‡
â”œâ”€â”€ preview.png             # æ’ä»¶é¢„è§ˆå›¾
â”œâ”€â”€ index.js                # æ’ä»¶ä¸»é€»è¾‘
â”œâ”€â”€ index.css               # æ’ä»¶æ ·å¼
â”œâ”€â”€ plugin.json             # æ’ä»¶é…ç½®æ–‡ä»¶
â”œâ”€â”€ build.sh                # Linux/macOS æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ build.bat               # Windows æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ LICENSE                 # å¼€æºåè®®
â”œâ”€â”€ README.md               # è‹±æ–‡è¯´æ˜
â””â”€â”€ README-zh.md            # ä¸­æ–‡è¯´æ˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…æ’ä»¶

#### æ–¹æ³•ä¸€ï¼šä»æºç å®‰è£…

1. å…‹éš†æˆ–ä¸‹è½½æ­¤ä»“åº“
2. å°† `my-plugin` æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ€æºç¬”è®°çš„æ’ä»¶ç›®å½•ï¼š

    - Windows: `{workspace}/data/plugins/`
    - macOS/Linux: `{workspace}/data/plugins/`
3. é‡å¯æ€æºç¬”è®°æˆ–åœ¨è®¾ç½®ä¸­åˆ·æ–°æ’ä»¶åˆ—è¡¨
4. å¯ç”¨ "My Plugin"

#### æ–¹æ³•äºŒï¼šä½¿ç”¨æ‰“åŒ…æ–‡ä»¶

1. è¿è¡Œæ‰“åŒ…è„šæœ¬ï¼š

    ```
    # Linux/macOS
    bash build.sh

    # Windows
    build.bat
    ```
2. å°†ç”Ÿæˆçš„ `package.zip` è§£å‹åˆ°æ’ä»¶ç›®å½•
3. é‡å¯æ€æºç¬”è®°

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.jsï¼ˆç”¨äºå¼€å‘è°ƒè¯•ï¼‰
- æ€æºç¬”è®° 3.0.12 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ ¸å¿ƒ API ä½¿ç”¨

#### 1. æ’ä»¶ç”Ÿå‘½å‘¨æœŸ

```
module.exports = class MyPlugin extends Plugin {
    onload() {
        // æ’ä»¶åŠ è½½æ—¶æ‰§è¡Œ
    }
    
    onLayoutReady() {
        // é¡µé¢å¸ƒå±€å‡†å¤‡å®Œæˆåæ‰§è¡Œ
    }
    
    onunload() {
        // æ’ä»¶å¸è½½æ—¶æ‰§è¡Œ
    }
    
    uninstall() {
        // æ’ä»¶è¢«åˆ é™¤æ—¶æ‰§è¡Œ
    }
}
```

#### 2. æ·»åŠ å‘½ä»¤

```
this.addCommand({
    langKey: "showDialog",      // å¤šè¯­è¨€é”®å
    hotkey: "â‡§âŒ˜O",            // å¿«æ·é”®
    callback: () => {
        this.showDialog();      // å›è°ƒå‡½æ•°
    },
});
```

#### 3. æ·»åŠ åœé æ 

```
this.addDock({
    config: {
        position: "LeftBottom", // ä½ç½®
        size: {width: 200, height: 0},
        icon: "iconSaving",     // å›¾æ ‡
        title: "Custom Dock",   // æ ‡é¢˜
        hotkey: "âŒ¥âŒ˜W",         // å¿«æ·é”®
    },
    init: (dock) => {
        // åˆå§‹åŒ– UI
    },
    // ... å…¶ä»–å›è°ƒ
});
```

#### 4. åˆ›å»ºå¯¹è¯æ¡†

```
const dialog = new Dialog({
    title: "æ ‡é¢˜",
    content: "<div>å†…å®¹</div>",
    width: "560px",
    height: "540px",
});
```

#### 5. è®¾ç½®é¢æ¿

```
this.setting = new Setting({
    confirmCallback: () => {
        // ä¿å­˜é…ç½®
        this.saveData(STORAGE_NAME, data);
    }
});

this.setting.addItem({
    title: "é…ç½®é¡¹æ ‡é¢˜",
    description: "é…ç½®é¡¹æè¿°",
    createActionElement: () => {
        // è¿”å›è¡¨å•å…ƒç´ 
    },
});
```

### æ•°æ®æŒä¹…åŒ–

```
// ä¿å­˜æ•°æ®
this.saveData(STORAGE_NAME, {key: "value"});

// è¯»å–æ•°æ®
const data = this.data[STORAGE_NAME];
```

### å¤šè¯­è¨€æ”¯æŒ

åœ¨ `i18n/` ç›®å½•ä¸‹æ·»åŠ è¯­è¨€æ–‡ä»¶ï¼š

```
{
  "showDialog": "æ‰“å¼€å¼¹çª—"
}
```

---

## ğŸ“ æ‰“åŒ…å‘å¸ƒ

### è‡ªåŠ¨æ‰“åŒ…

è¿è¡Œæ‰“åŒ…è„šæœ¬ä¼šè‡ªåŠ¨æ’é™¤ä»¥ä¸‹æ–‡ä»¶/ç›®å½•ï¼š

- â€‹`.git/`
- â€‹`.gitignore`
- â€‹`.history/`
- â€‹`.idea/`
- â€‹`.DS_Store`
- â€‹`node_modules/`
- â€‹`build.sh`
- â€‹`build.bat`
- â€‹`.hotreload`

### æ‰‹åŠ¨æ‰“åŒ…

å°†ä»¥ä¸‹æ–‡ä»¶å‹ç¼©ä¸º `package.zip`ï¼š

```
- i18n/
- icon.png
- preview.png
- index.js
- index.css
- plugin.json
- README.md
- README-zh.md
- LICENSE
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### plugin.json å­—æ®µè¯´æ˜

|å­—æ®µ|è¯´æ˜|
| ------| ------------------------------|
|â€‹`name`|æ’ä»¶å”¯ä¸€æ ‡è¯†ï¼ˆè‹±æ–‡ï¼‰|
|â€‹`author`|ä½œè€…åç§°|
|â€‹`url`|é¡¹ç›®ä¸»é¡µ URL|
|â€‹`version`|æ’ä»¶ç‰ˆæœ¬å·|
|â€‹`minAppVersion`|æœ€ä½æ”¯æŒçš„æ€æºç‰ˆæœ¬|
|â€‹`backends`|åç«¯æ”¯æŒå¹³å°ï¼ˆ`["all"]`è¡¨ç¤ºå…¨å¹³å°ï¼‰|
|â€‹`frontends`|å‰ç«¯æ”¯æŒå¹³å°ï¼ˆ`["all"]`è¡¨ç¤ºå…¨å¹³å°ï¼‰|
|â€‹`displayName`|æ’ä»¶æ˜¾ç¤ºåç§°ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰|
|â€‹`description`|æ’ä»¶æè¿°ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰|
|â€‹`readme`|è¯´æ˜æ–‡æ¡£è·¯å¾„ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰|
|â€‹`funding`|èµåŠ©é“¾æ¥|

---

## ğŸ› è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æ—¥å¿—**  
    æ‰“å¼€æ€æºç¬”è®°å¼€å‘è€…å·¥å…·ï¼ˆ`F12`ï¼‰ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
2. **é‡è½½**  
    ä¿®æ”¹ä»£ç åï¼Œåœ¨devtoolsä¸­æŒ‰`Ctrl+R`
3. **æ–­ç‚¹è°ƒè¯•**  
    åœ¨ `index.js`â€‹ ä¸­ä½¿ç”¨ `debugger` è¯­å¥æˆ–åœ¨å¼€å‘è€…å·¥å…·ä¸­è®¾ç½®æ–­ç‚¹

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT** å¼€æºåè®®ã€‚  
è¯¦è§ [LICENSE](https://cursor.com/cn/LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

---

## ğŸ“§ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µï¼š**  [https://github.com/wish5115/my-plugin](https://github.com/wish5115/my-plugin)
- **ä½œè€…ï¼š**  Wilson
- **èµåŠ©ï¼š**  [æŸ¥çœ‹èµåŠ©äºŒç»´ç ](https://b3logfile.com/file/2025/06/image-fEA9BRv.png)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [æ€æºç¬”è®°](https://github.com/siyuan-note/siyuan) å›¢é˜Ÿæä¾›çš„ä¼˜ç§€æ’ä»¶å¼€å‘æ¡†æ¶ï¼

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼**  ğŸ‰
